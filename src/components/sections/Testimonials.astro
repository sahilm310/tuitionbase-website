---
import TestimonialsData from "../../config/testimonials.json";

// Function to shuffle array and return [count] items
function getRandomTestimonials(testimonials: any[], count: number) {
    const shuffled = [...testimonials].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, count);
}

const testimonials = getRandomTestimonials(TestimonialsData, 3);
---

<section class="testimonials">
    <div class="container">
        <div class="section-header">
            <h2>What Our Students Say</h2>
            <p>Real feedback from students and parents who have experienced our teaching</p>
        </div>
        <div class="testimonial-grid">
            {
                testimonials.map((testimonial) => (
                    <div class="testimonial-card">
                        <div class="testimonial-text">{testimonial.text}</div>
                        <div class="testimonial-author">{testimonial.author}</div>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<style lang="scss">
    /* Testimonials */
    .testimonials {
        background: #ffffff;
    }

    .testimonial-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 32px;
        margin-top: 48px;
    }

    .testimonial-card {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 32px;
        border-radius: 15px;
        background: white;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    }

    .testimonial-card::before {
        content: '"';
        position: absolute;
        top: -0.3em;
        left: 0;
        font-size: 80px;
        color: #0bb2f0;
        font-weight: 700;
        font-style: italic;
        line-height: 1;
    }

    .testimonial-text {
        margin-bottom: 24px;
        line-height: 1.6;
        color: #555;
        font-style: italic;
    }

    .testimonial-author {
        font-weight: bold;
        color: #333;
    }

    @media (max-width: 768px) {
        .testimonial-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
